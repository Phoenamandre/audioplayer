var threeSixtyPlayer,ThreeSixtyPlayer;!function(a){function b(){var b=this,c=this,d=soundManager,e=navigator.userAgent,f=e.match(/msie/i),g=e.match(/opera/i),h=e.match(/safari/i),i=e.match(/chrome/i),k=(e.match(/firefox/i),e.match(/ipad|iphone/i)),l=void 0===a.G_vmlCanvasManager&&void 0!==document.createElement("canvas").getContext("2d"),m=g||i?359.9:360,n=navigator.userAgent.match(/msie [678]/i)?1:2;this.excludeClass="threesixty-exclude",this.links=[],this.sounds=[],this.soundsByURL=[],this.indexByURL=[],this.lastSound=null,this.lastTouchedSound=null,this.soundCount=0,this.oUITemplate=null,this.oUIImageMap=null,this.vuMeter=null,this.callbackCount=0,this.peakDataHistory=[],this.config={playNext:!1,autoPlay:!1,allowMultiple:!1,loadRingColor:"#ccc",playRingColor:"#000",backgroundRingColor:"#eee",segmentRingColor:"rgba(255,255,255,0.33)",segmentRingColorAlt:"rgba(0,0,0,0.1)",loadRingColorMetadata:"#ddd",playRingColorMetadata:"rgba(128,192,256,0.9)",circleDiameter:null,circleRadius:null,animDuration:500,animTransition:a.Animator.tx.bouncy,showHMSTime:!1,scaleFont:!0,useWaveformData:!1,waveformDataColor:"#0099ff",waveformDataDownsample:3,waveformDataOutside:!1,waveformDataConstrain:!1,waveformDataLineRatio:.64,useEQData:!1,eqDataColor:"#339933",eqDataDownsample:4,eqDataOutside:!0,eqDataLineRatio:.54,usePeakData:!0,peakDataColor:"#ff33ff",peakDataOutside:!0,peakDataLineRatio:.5,useAmplifier:!0,fontSizeMax:null,scaleArcWidth:1,useFavIcon:!1},this.css={sDefault:"sm2_link",sBuffering:"sm2_buffering",sPlaying:"sm2_playing",sPaused:"sm2_paused"},this.addEventHandler=void 0!==a.addEventListener?function(a,b,c){return a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},this.removeEventHandler=void 0!==a.removeEventListener?function(a,b,c){return a.removeEventListener(b,c,!1)}:function(a,b,c){return a.detachEvent("on"+b,c)},this.hasClass=function(a,b){return void 0!==a.className&&a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},this.addClass=function(a,c){if(!a||!c||b.hasClass(a,c))return!1;a.className=(a.className?a.className+" ":"")+c},this.removeClass=function(a,c){if(!a||!c||!b.hasClass(a,c))return!1;a.className=a.className.replace(new RegExp("( "+c+")|("+c+")","g"),"")},this.getElementsByClassName=function(a,c,d){var g,h,e=d||document,f=[],i=[];if(void 0!==c&&"string"!=typeof c)for(g=c.length;g--;)i&&i[c[g]]||(i[c[g]]=e.getElementsByTagName(c[g]));else i=c?e.getElementsByTagName(c):e.all||e.getElementsByTagName("*");if("string"!=typeof c)for(g=c.length;g--;)for(h=i[c[g]].length;h--;)b.hasClass(i[c[g]][h],a)&&f.push(i[c[g]][h]);else for(g=0;g<i.length;g++)b.hasClass(i[g],a)&&f.push(i[g]);return f},this.getParentByNodeName=function(a,b){if(!a||!b)return!1;for(b=b.toLowerCase();a.parentNode&&b!==a.parentNode.nodeName.toLowerCase();)a=a.parentNode;return a.parentNode&&b===a.parentNode.nodeName.toLowerCase()?a.parentNode:null},this.getParentByClassName=function(a,c){if(!a||!c)return!1;for(;a.parentNode&&!b.hasClass(a.parentNode,c);)a=a.parentNode;return a.parentNode&&b.hasClass(a.parentNode,c)?a.parentNode:null},this.getSoundByURL=function(a){return void 0!==b.soundsByURL[a]?b.soundsByURL[a]:null},this.isChildOfNode=function(a,b){if(!a||!a.parentNode)return!1;b=b.toLowerCase();do{a=a.parentNode}while(a&&a.parentNode&&a.nodeName.toLowerCase()!==b);return a&&a.nodeName.toLowerCase()===b?a:null},this.isChildOfClass=function(a,c){if(!a||!c)return!1;for(;a.parentNode&&!b.hasClass(a,c);)a=b.findParent(a);return b.hasClass(a,c)},this.findParent=function(a){if(!a||!a.parentNode)return!1;if(a=a.parentNode,2===a.nodeType)for(;a&&a.parentNode&&2===a.parentNode.nodeType;)a=a.parentNode;return a},this.getStyle=function(b,c){try{if(b.currentStyle)return b.currentStyle[c];if(a.getComputedStyle)return document.defaultView.getComputedStyle(b,null).getPropertyValue(c)}catch(a){}return null},this.findXY=function(a){var b=0,c=0;do{b+=a.offsetLeft,c+=a.offsetTop}while(a=a.offsetParent);return[b,c]},this.getMouseXY=function(c){return c=c||a.event,k&&c.touches&&(c=c.touches[0]),c.pageX||c.pageY?[c.pageX,c.pageY]:c.clientX||c.clientY?[c.clientX+b.getScrollLeft(),c.clientY+b.getScrollTop()]:void 0},this.getScrollLeft=function(){return document.body.scrollLeft+document.documentElement.scrollLeft},this.getScrollTop=function(){return document.body.scrollTop+document.documentElement.scrollTop},this.events={play:function(){c.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=c.css.sPlaying,c.addClass(this._360data.oUIBox,this._360data.className),b.fanOut(this)},stop:function(){c.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",b.fanIn(this)},pause:function(){c.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=c.css.sPaused,c.addClass(this._360data.oUIBox,this._360data.className)},resume:function(){c.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=c.css.sPlaying,c.addClass(this._360data.oUIBox,this._360data.className)},finish:function(){var a;c.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",this._360data.didFinish=!0,b.fanIn(this),c.config.playNext&&(a=c.indexByURL[this._360data.oLink.href]+1)<c.links.length&&c.handleClick({target:c.links[a]})},whileloading:function(){this.paused&&b.updatePlaying.apply(this)},whileplaying:function(){b.updatePlaying.apply(this),this._360data.fps++},bufferchange:function(){this.isBuffering?c.addClass(this._360data.oUIBox,c.css.sBuffering):c.removeClass(this._360data.oUIBox,c.css.sBuffering)}},this.stopEvent=function(b){return void 0!==b&&void 0!==b.preventDefault?b.preventDefault():void 0!==a.event&&void 0!==a.event.returnValue&&(a.event.returnValue=!1),!1},this.getTheDamnLink=f?function(b){return b&&b.target?b.target:a.event.srcElement}:function(a){return a.target},this.handleClick=function(c){if(c.button>1)return!0;var f,h,i,j,k,l,e=b.getTheDamnLink(c);return"a"!==e.nodeName.toLowerCase()&&!(e=b.isChildOfNode(e,"a"))||(!b.isChildOfClass(e,"ui360")||(e.getAttribute("href"),!(e.href&&d.canPlayLink(e)&&!b.hasClass(e,b.excludeClass))||(d._writeDebug("handleClick()"),h=e.href,i=b.getSoundByURL(h),i?i===b.lastSound?i.togglePause():(i.togglePause(),d._writeDebug("sound different than last sound: "+b.lastSound.id),!b.config.allowMultiple&&b.lastSound&&b.stopSound(b.lastSound)):(j=e.parentNode,k=b.getElementsByClassName("ui360-vis","div",j.parentNode).length,i=d.createSound({id:"ui360Sound"+b.soundCount++,url:h,onplay:b.events.play,onstop:b.events.stop,onpause:b.events.pause,onresume:b.events.resume,onfinish:b.events.finish,onbufferchange:b.events.bufferchange,type:e.type||null,whileloading:b.events.whileloading,whileplaying:b.events.whileplaying,useWaveformData:k&&b.config.useWaveformData,useEQData:k&&b.config.useEQData,usePeakData:k&&b.config.usePeakData}),l=parseInt(b.getElementsByClassName("sm2-360ui","div",j)[0].offsetWidth*n,10),f=b.getElementsByClassName("sm2-canvas","canvas",j),i._360data={oUI360:b.getParentByClassName(e,"ui360"),oLink:e,className:b.css.sPlaying,oUIBox:b.getElementsByClassName("sm2-360ui","div",j)[0],oCanvas:f[f.length-1],oButton:b.getElementsByClassName("sm2-360btn","span",j)[0],oTiming:b.getElementsByClassName("sm2-timing","div",j)[0],oCover:b.getElementsByClassName("sm2-cover","div",j)[0],circleDiameter:l,circleRadius:l/2,lastTime:null,didFinish:null,pauseCount:0,radius:0,fontSize:1,fontSizeMax:b.config.fontSizeMax,scaleFont:k&&b.config.scaleFont,showHMSTime:k,amplifier:k&&b.config.usePeakData?.9:1,radiusMax:.175*l,width:0,widthMax:.4*l,lastValues:{bytesLoaded:0,bytesTotal:0,position:0,durationEstimate:0},animating:!1,oAnim:new a.Animator({duration:b.config.animDuration,transition:b.config.animTransition,onComplete:function(){}}),oAnimProgress:function(a){var c=this;c._360data.radius=parseInt(c._360data.radiusMax*c._360data.amplifier*a,10),c._360data.width=parseInt(c._360data.widthMax*c._360data.amplifier*a,10),c._360data.scaleFont&&null!==c._360data.fontSizeMax&&(c._360data.oTiming.style.fontSize=parseInt(Math.max(1,c._360data.fontSizeMax*a),10)+"px",c._360data.oTiming.style.opacity=a),(c.paused||0===c.playState||0===c._360data.lastValues.bytesLoaded||0===c._360data.lastValues.position)&&b.updatePlaying.apply(c)},fps:0},void 0!==b.Metadata&&b.getElementsByClassName("metadata","div",i._360data.oUI360).length&&(i._360data.metadata=new b.Metadata(i,b)),i._360data.scaleFont&&null!==i._360data.fontSizeMax&&(i._360data.oTiming.style.fontSize="1px"),i._360data.oAnim.addSubject(i._360data.oAnimProgress,i),b.refreshCoords(i),b.updatePlaying.apply(i),b.soundsByURL[h]=i,b.sounds.push(i),!b.config.allowMultiple&&b.lastSound&&b.stopSound(b.lastSound),i.play()),b.lastSound=i,void 0!==c&&void 0!==c.preventDefault?c.preventDefault():void 0!==a.event&&(a.event.returnValue=!1),!1)))},this.fanOut=function(c){var d=c;if(1===d._360data.animating)return!1;d._360data.animating=0,soundManager._writeDebug("fanOut: "+d.id+": "+d._360data.oLink.href),d._360data.oAnim.seekTo(1),a.setTimeout(function(){d._360data.animating=0},b.config.animDuration+20)},this.fanIn=function(c){var d=c;if(-1===d._360data.animating)return!1;d._360data.animating=-1,soundManager._writeDebug("fanIn: "+d.id+": "+d._360data.oLink.href),d._360data.oAnim.seekTo(0),a.setTimeout(function(){d._360data.didFinish=!1,d._360data.animating=0,b.resetLastValues(d)},b.config.animDuration+20)},this.resetLastValues=function(a){a._360data.lastValues.position=0},this.refreshCoords=function(a){a._360data.canvasXY=b.findXY(a._360data.oCanvas),a._360data.canvasMid=[a._360data.circleRadius,a._360data.circleRadius],a._360data.canvasMidXY=[a._360data.canvasXY[0]+a._360data.canvasMid[0],a._360data.canvasXY[1]+a._360data.canvasMid[1]]},this.stopSound=function(a){soundManager._writeDebug("stopSound: "+a.id),soundManager.stop(a.id),k||soundManager.unload(a.id)},this.buttonClick=function(c){var d=c?c.target?c.target:c.srcElement:a.event.srcElement;return b.handleClick({target:b.getParentByClassName(d,"sm2-360ui").nextSibling}),!1},this.buttonMouseDown=function(a){return k?b.addEventHandler(document,"touchmove",b.mouseDown):document.onmousemove=function(a){b.mouseDown(a)},b.stopEvent(a),!1},this.mouseDown=function(c){if(!k&&c.button>1)return!0;if(!b.lastSound)return b.stopEvent(c),!1;var e,f,g,d=c||a.event;return k&&d.touches&&(d=d.touches[0]),e=d.target||d.srcElement,f=b.getSoundByURL(b.getElementsByClassName("sm2_link","a",b.getParentByClassName(e,"ui360"))[0].href),b.lastTouchedSound=f,b.refreshCoords(f),g=f._360data,b.addClass(g.oUIBox,"sm2_dragging"),g.pauseCount=b.lastTouchedSound.paused?1:0,b.mmh(c||a.event),k?(b.removeEventHandler(document,"touchmove",b.mouseDown),b.addEventHandler(document,"touchmove",b.mmh),b.addEventHandler(document,"touchend",b.mouseUp)):(document.onmousemove=b.mmh,document.onmouseup=b.mouseUp),b.stopEvent(c),!1},this.mouseUp=function(a){var c=b.lastTouchedSound._360data;b.removeClass(c.oUIBox,"sm2_dragging"),0===c.pauseCount&&b.lastTouchedSound.resume(),k?(b.removeEventHandler(document,"touchmove",b.mmh),b.removeEventHandler(document,"touchend",b.mouseUP)):(document.onmousemove=null,document.onmouseup=null)},this.mmh=function(c){void 0===c&&(c=a.event);var d=b.lastTouchedSound,e=b.getMouseXY(c),f=e[0],g=e[1],h=f-d._360data.canvasMidXY[0],i=g-d._360data.canvasMidXY[1],j=Math.floor(m-(b.rad2deg(Math.atan2(h,i))+180));return d.setPosition(d.durationEstimate*(j/m)),b.stopEvent(c),!1},this.drawSolidArc=function(a,c,d,e,f,i,j){var n,o,p,q,m=a;m.getContext&&(n=m.getContext("2d")),a=n,j||b.clearCanvas(m),c&&(n.fillStyle=c),a.beginPath(),isNaN(f)&&(f=0),o=d-e,(!(p=g||h)||p&&d>0)&&(a.arc(0,0,d,i,f,!1),q=b.getArcEndpointCoords(o,f),a.lineTo(q.x,q.y),a.arc(0,0,o,f,i,!0),a.closePath(),a.fill())},this.getArcEndpointCoords=function(a,b){return{x:a*Math.cos(b),y:a*Math.sin(b)}},this.deg2rad=function(a){return a*Math.PI/180},this.rad2deg=function(a){return 180*a/Math.PI},this.getTime=function(a,b){var c=Math.floor(a/1e3),d=Math.floor(c/60),e=c-60*d;return b?d+":"+(e<10?"0"+e:e):{min:d,sec:e}},this.clearCanvas=function(a){var d,e,b=a,c=null;b.getContext&&(c=b.getContext("2d")),c&&(d=b.offsetWidth,e=b.offsetHeight,c.clearRect(-d/2,-e/2,d,e))},this.updatePlaying=function(){var a=this._360data.showHMSTime?b.getTime(this.position,!0):parseInt(this.position/1e3,10),c=b.config.scaleArcWidth;this.bytesLoaded&&(this._360data.lastValues.bytesLoaded=this.bytesLoaded,this._360data.lastValues.bytesTotal=this.bytesTotal),this.position&&(this._360data.lastValues.position=this.position),this.durationEstimate&&(this._360data.lastValues.durationEstimate=this.durationEstimate),b.drawSolidArc(this._360data.oCanvas,b.config.backgroundRingColor,this._360data.width,this._360data.radius*c,b.deg2rad(m),!1),b.drawSolidArc(this._360data.oCanvas,this._360data.metadata?b.config.loadRingColorMetadata:b.config.loadRingColor,this._360data.width,this._360data.radius*c,b.deg2rad(m*(this._360data.lastValues.bytesLoaded/this._360data.lastValues.bytesTotal)),0,!0),0!==this._360data.lastValues.position&&b.drawSolidArc(this._360data.oCanvas,this._360data.metadata?b.config.playRingColorMetadata:b.config.playRingColor,this._360data.width,this._360data.radius*c,b.deg2rad(1===this._360data.didFinish?m:m*(this._360data.lastValues.position/this._360data.lastValues.durationEstimate)),0,!0),this._360data.metadata&&this._360data.metadata.events.whileplaying(),a!==this._360data.lastTime&&(this._360data.lastTime=a,this._360data.oTiming.innerHTML=a),(this.instanceOptions.useWaveformData||this.instanceOptions.useEQData)&&l&&b.updateWaveform(this),b.config.useFavIcon&&b.vuMeter&&b.vuMeter.updateVU(this)},this.updateWaveform=function(a){if(!b.config.useWaveformData&&!b.config.useEQData||!d.features.waveformData&&!d.features.eqData)return!1;if(!a.waveformData.left.length&&!a.eqData.length&&!a.peakData.left)return!1;var l,n,o,p,q,r,s,t,u,v,x,y,A,f=(a._360data.oCanvas.getContext("2d"),parseInt(a._360data.circleDiameter/2,10)),g=f/2;if(b.config.useWaveformData)for(o=b.config.waveformDataDownsample,o=Math.max(1,o),p=256,q=p/o,r=0,s=0,t=null,u=b.config.waveformDataOutside?1:b.config.waveformDataConstrain?.5:.565,g=b.config.waveformDataOutside?.7:.75,v=b.deg2rad(360/q*b.config.waveformDataLineRatio),l=0;l<p;l+=o)r=b.deg2rad(l/q*1/o*360),s=r+v,t=a.waveformData.left[l],t<0&&b.config.waveformDataConstrain&&(t=Math.abs(t)),b.drawSolidArc(a._360data.oCanvas,b.config.waveformDataColor,a._360data.width*u*(2-b.config.scaleArcWidth),a._360data.radius*g*1.25*t,s,r,!0);if(b.config.useEQData)for(o=b.config.eqDataDownsample,0,o=Math.max(1,o),x=192,q=x/o,u=b.config.eqDataOutside?1:.565,n=b.config.eqDataOutside?-1:1,g=b.config.eqDataOutside?.5:.75,r=0,s=0,v=b.deg2rad(360/q*b.config.eqDataLineRatio),y=b.deg2rad(1===a._360data.didFinish?360:a._360data.lastValues.position/a._360data.lastValues.durationEstimate*360),0,0,l=0;l<x;l+=o)r=b.deg2rad(l/x*360),s=r+v,b.drawSolidArc(a._360data.oCanvas,s>y?b.config.eqDataColor:b.config.playRingColor,a._360data.width*u,a._360data.radius*g*(a.eqData.left[l]*n),s,r,!0);if(b.config.usePeakData&&!a._360data.animating){for(A=a.peakData.left||a.peakData.right,x=3,l=0;l<x;l++)A=A||a.eqData[l];a._360data.amplifier=b.config.useAmplifier?.9+.1*A:1,a._360data.radiusMax=.175*a._360data.circleDiameter*a._360data.amplifier,a._360data.widthMax=.4*a._360data.circleDiameter*a._360data.amplifier,a._360data.radius=parseInt(a._360data.radiusMax*a._360data.amplifier,10),a._360data.width=parseInt(a._360data.widthMax*a._360data.amplifier,10)}},this.getUIHTML=function(a){return['<canvas class="sm2-canvas" width="'+a+'" height="'+a+'"></canvas>',' <span class="sm2-360btn sm2-360btn-default"></span>',' <div class="sm2-timing'+(navigator.userAgent.match(/safari/i)?" alignTweak":"")+'"></div>',' <div class="sm2-cover"></div>']},this.uiTest=function(a){var d,e,f,g,h,i,j,k,l,c=document.createElement("div");return c.className="sm2-360ui",d=document.createElement("div"),d.className="ui360"+(a?" "+a:""),e=d.appendChild(c.cloneNode(!0)),d.style.position="absolute",d.style.left="-9999px",f=document.body.appendChild(d),g=e.offsetWidth*n,h=b.getUIHTML(g),e.innerHTML=h[1]+h[2]+h[3],i=parseInt(g,10),j=parseInt(i/2,10),l=b.getElementsByClassName("sm2-timing","div",f)[0],k=parseInt(b.getStyle(l,"font-size"),10),isNaN(k)&&(k=null),d.parentNode.removeChild(d),h=d=e=f=null,{circleDiameter:i,circleRadius:j,fontSizeMax:k}},this.init=function(){d._writeDebug("threeSixtyPlayer.init()");var e,g,l,m,o,p,q,r,s,t,u,v,x,y,c=b.getElementsByClassName("ui360","div"),h=[],i=!1,j=0;for(e=0,g=c.length;e<g;e++)h.push(c[e].getElementsByTagName("a")[0]),c[e].style.backgroundImage="none";for(b.oUITemplate=document.createElement("div"),b.oUITemplate.className="sm2-360ui",b.oUITemplateVis=document.createElement("div"),b.oUITemplateVis.className="sm2-360ui",s=b.uiTest(),b.config.circleDiameter=s.circleDiameter,b.config.circleRadius=s.circleRadius,t=b.uiTest("ui360-vis"),b.config.fontSizeMax=t.fontSizeMax,b.oUITemplate.innerHTML=b.getUIHTML(b.config.circleDiameter).join(""),b.oUITemplateVis.innerHTML=b.getUIHTML(t.circleDiameter).join(""),e=0,g=h.length;e<g;e++)!d.canPlayLink(h[e])||b.hasClass(h[e],b.excludeClass)||b.hasClass(h[e],b.css.sDefault)||(b.addClass(h[e],b.css.sDefault),b.links[j]=h[e],b.indexByURL[h[e].href]=j,j++,i=b.hasClass(h[e].parentNode,"ui360-vis"),q=(i?t:s).circleDiameter,r=(i?t:s).circleRadius,u=h[e].parentNode.insertBefore((i?b.oUITemplateVis:b.oUITemplate).cloneNode(!0),h[e]),f&&void 0!==a.G_vmlCanvasManager?(h[e].parentNode,x=document.createElement("canvas"),x.className="sm2-canvas",y="sm2_canvas_"+e+(new Date).getTime(),x.id=y,x.width=q,x.height=q,u.appendChild(x),a.G_vmlCanvasManager.initElement(x),m=document.getElementById(y),l=m.parentNode.getElementsByTagName("canvas"),l.length>1&&(m=l[l.length-1])):m=h[e].parentNode.getElementsByTagName("canvas")[0],n>1&&b.addClass(m,"hi-dpi"),p=b.getElementsByClassName("sm2-cover","div",h[e].parentNode)[0],v=h[e].parentNode.getElementsByTagName("span")[0],b.addEventHandler(v,"click",b.buttonClick),k?b.addEventHandler(p,"touchstart",b.mouseDown):b.addEventHandler(p,"mousedown",b.mouseDown),o=m.getContext("2d"),o.translate(r,r),o.rotate(b.deg2rad(-90)));j>0&&(b.addEventHandler(document,"click",b.handleClick),b.config.autoPlay&&b.handleClick({target:b.links[0],preventDefault:function(){}})),d._writeDebug("threeSixtyPlayer.init(): Found "+j+" relevant items."),b.config.useFavIcon&&void 0!==this.VUMeter&&(this.vuMeter=new this.VUMeter(this))}}b.prototype.VUMeter=function(a){var b=a,c=this,d=document.getElementsByTagName("head")[0],e=navigator.userAgent.match(/opera/i),f=navigator.userAgent.match(/firefox/i);this.vuMeterData=[],this.vuDataCanvas=null,this.setPageIcon=function(a){if(!b.config.useFavIcon||!b.config.usePeakData||!a)return!1;var c=document.getElementById("sm2-favicon");c&&(d.removeChild(c),c=null),c||(c=document.createElement("link"),c.id="sm2-favicon",c.rel="shortcut icon",c.type="image/png",c.href=a,document.getElementsByTagName("head")[0].appendChild(c))},this.resetPageIcon=function(){if(!b.config.useFavIcon)return!1;var a=document.getElementById("favicon");a&&(a.href="/favicon.ico")},this.updateVU=function(a){soundManager.flashVersion>=9&&b.config.useFavIcon&&b.config.usePeakData&&c.setPageIcon(c.vuMeterData[parseInt(16*a.peakData.left,10)][parseInt(16*a.peakData.right,10)])},this.createVUData=function(){var a=0,b=0,d=c.vuDataCanvas.getContext("2d"),e=d.createLinearGradient(0,16,0,0),f=d.createLinearGradient(0,16,0,0),g="rgba(0,0,0,0.2)";for(e.addColorStop(0,"rgb(0,192,0)"),e.addColorStop(.3,"rgb(0,255,0)"),e.addColorStop(.625,"rgb(255,255,0)"),e.addColorStop(.85,"rgb(255,0,0)"),f.addColorStop(0,g),f.addColorStop(1,"rgba(0,0,0,0.5)"),a=0;a<16;a++)c.vuMeterData[a]=[];for(a=0;a<16;a++)for(b=0;b<16;b++)c.vuDataCanvas.setAttribute("width",16),c.vuDataCanvas.setAttribute("height",16),d.fillStyle=f,d.fillRect(0,0,7,15),d.fillRect(8,0,7,15),d.fillStyle=e,d.fillRect(0,15-a,7,16-(16-a)),d.fillRect(8,15-b,7,16-(16-b)),d.clearRect(0,3,16,1),d.clearRect(0,7,16,1),d.clearRect(0,11,16,1),c.vuMeterData[a][b]=c.vuDataCanvas.toDataURL("image/png")},this.testCanvas=function(){var a=document.createElement("canvas");if(!a||void 0===a.getContext)return null;if(!a.getContext("2d")||"function"!=typeof a.toDataURL)return null;try{a.toDataURL("image/png")}catch(a){return null}return a},this.init=function(){b.config.useFavIcon&&(c.vuDataCanvas=c.testCanvas(),c.vuDataCanvas&&(f||e)?c.createVUData():b.config.useFavIcon=!1)},this.init()},navigator.userAgent.match(/webkit/i)&&navigator.userAgent.match(/mobile/i)&&soundManager.setup({useHTML5Audio:!0}),soundManager.setup({html5PollingInterval:50,debugMode:a.location.href.match(/debug=1/i),consoleOnly:!0,flashVersion:9,useHighPerformance:!0}),soundManager.debugMode&&a.setInterval(function(){var b=a.threeSixtyPlayer;b&&b.lastSound&&b.lastSound._360data.fps&&void 0===a.isHome&&(soundManager._writeDebug("fps: ~"+b.lastSound._360data.fps),b.lastSound._360data.fps=0)},1e3),a.ThreeSixtyPlayer=b}(window),threeSixtyPlayer=new ThreeSixtyPlayer,soundManager.onready(threeSixtyPlayer.init);